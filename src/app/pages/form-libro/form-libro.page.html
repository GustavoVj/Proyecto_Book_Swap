<app-header></app-header>

<ion-content class="app-content">
  <div class="page-container">
    <ion-card class="book-form-card">
      <ion-card-content>

        <!-- üìò Campo: T√≠tulo -->
        <ion-item lines="none">
          <ion-label position="floating">T√≠tulo</ion-label>
          <ion-input
            [(ngModel)]="book.title"
            placeholder="Ej. Introducci√≥n a Angular"
          ></ion-input>
        </ion-item>

        <!-- ‚úçÔ∏è Campo: Autor -->
        <ion-item lines="none">
          <ion-label position="floating">Autor</ion-label>
          <ion-input
            [(ngModel)]="book.author"
            placeholder="Ej. John Doe"
          ></ion-input>
        </ion-item>

        <!-- üìù Campo: Descripci√≥n -->
        <ion-item lines="none">
          <ion-label position="floating">Descripci√≥n</ion-label>
          <ion-textarea
            auto-grow="true"
            [(ngModel)]="book.description"
            placeholder="Describe brevemente el libro..."
          ></ion-textarea>
        </ion-item>

        <!-- üåÜ Campo: URL de portada -->
        <ion-item lines="none">
          <ion-label position="floating">URL de la portada</ion-label>
          <ion-input
            [(ngModel)]="coverUrlValue"
            placeholder="https://..."
          ></ion-input>
        </ion-item>

        <!-- üñºÔ∏è Vista previa -->
        <div class="preview-container" *ngIf="coverUrlValue">
          <img
            [src]="coverUrlValue"
            alt="Vista previa"
            class="preview-image"
            (error)="onImageError($event)"
          />
        </div>

        <!-- üü¢ Botones de acci√≥n -->
        <div class="form-actions">
          <!-- Guardar o Actualizar -->
          <ion-button expand="block" class="btn-primary" (click)="isEditing ? editar() : crear()">
            <ion-icon slot="start" [name]="isEditing ? 'create-outline' : 'save-outline'"></ion-icon>
            {{ isEditing ? 'Actualizar libro' : 'Guardar libro' }}
          </ion-button>

          <!-- Eliminar solo si est√° editando -->
          <ion-button
            *ngIf="isEditing"
            expand="block"
            color="danger"
            fill="outline"
            (click)="borrar()"
          >
            <ion-icon slot="start" name="trash-outline"></ion-icon>
            Eliminar libro
          </ion-button>

          <!-- Cancelar -->
          <ion-button
            expand="block"
            fill="clear"
            routerLink="/home"
            class="btn-cancelar"
          >
            <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
            Cancelar
          </ion-button>
        </div>

      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
